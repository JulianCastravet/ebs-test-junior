{"ast":null,"code":"var _jsxFileName = \"/home/brizy/Documents/MyApp/test/ebs-fe-test/src/components/Products.tsx\";\nimport { ProductContext } from 'context';\nimport React, { useCallback, useContext, useEffect } from 'react';\nimport { useState } from 'react';\nimport { useMemo } from 'react';\nimport { useNavigate } from 'react-router-dom';\nexport const Products = () => {\n  const navigate = useNavigate();\n  const handleGoToCart = useCallback(() => {\n    navigate('/cart');\n  }, [navigate]);\n  const {\n    products,\n    addToCart,\n    removeFromCart,\n    cartItems,\n    fetchProducts\n  } = useContext(ProductContext);\n  const [sortState, setSortState] = useState({\n    key: '',\n    direction: ''\n  });\n  const [sortFlag, setSortFlag] = useState(false);\n  const [idFlag, setIdFlag] = useState(false);\n  useEffect(() => {\n    fetchProducts();\n  }, [fetchProducts]);\n  const sortedItems = useMemo(() => {\n    let sortableProducts = [...products];\n\n    if (sortState !== null) {\n      sortableProducts.sort((a, b) => {\n        if (a.price < b.price) {\n          return sortState.direction === 'lowest' ? -1 : 1;\n        }\n\n        if (a.price > b.price) {\n          return sortState.direction === 'lowest' ? 1 : -1;\n        }\n\n        return 0;\n      });\n    }\n\n    return sortableProducts;\n  }, [sortState, products]);\n  const [_, setResortedArray] = useState(sortedItems);\n  const handleSortByPrice = useCallback(key => {\n    let direction = 'lowest';\n\n    if (sortState && sortState.key === key && sortState.direction === 'lowest') {\n      direction = 'highest';\n    }\n\n    setSortState({\n      key,\n      direction\n    });\n  }, [sortState, setSortState]);\n  const handleSortByCategory = useCallback(() => {\n    setSortFlag(!sortFlag);\n    const newArr = sortedItems.sort((a, b) => {\n      return sortFlag ? a.category.id.localeCompare(b.category.id) : b.category.id.localeCompare(a.category.id);\n    });\n    setResortedArray(newArr);\n  }, [sortedItems, sortFlag]);\n  const handleRemoveFromCart = useCallback(id => {\n    removeFromCart(id);\n  }, [removeFromCart]);\n  const handleAddToCart = useCallback(item => {\n    addToCart(item);\n  }, [addToCart]);\n  const handleSortByID = useCallback(() => {\n    setIdFlag(!idFlag);\n    setResortedArray(sortedItems.sort((a, b) => a.id - b.id));\n  }, [sortedItems]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      margin: '50px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleGoToCart,\n    className: \"goto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }, \"Go To Cart\"), /*#__PURE__*/React.createElement(\"table\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    onClick: handleSortByID,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }, \"ID\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }, \"NAME\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleSortByCategory,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 15\n    }\n  }, \"CATEGORY\")), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => {\n      handleSortByPrice('highest');\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 15\n    }\n  }, \"PRICE\")), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }\n  }, \"ACTIONS\")), sortedItems.map(cartItems => {\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      key: cartItems.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }\n    }, cartItems.id), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }\n    }, \" \", cartItems.name), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }\n    }, \" \", cartItems.category.name), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }\n    }, \"$\", cartItems.price), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => handleRemoveFromCart(cartItems.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 19\n      }\n    }, \"REMOVE\"), \" Select\", ' ', /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => handleAddToCart({ ...cartItems,\n        quantity: 1\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 19\n      }\n    }, \"ADD\")));\n  }))));\n};","map":{"version":3,"names":["ProductContext","React","useCallback","useContext","useEffect","useState","useMemo","useNavigate","Products","navigate","handleGoToCart","products","addToCart","removeFromCart","cartItems","fetchProducts","sortState","setSortState","key","direction","sortFlag","setSortFlag","idFlag","setIdFlag","sortedItems","sortableProducts","sort","a","b","price","_","setResortedArray","handleSortByPrice","handleSortByCategory","newArr","category","id","localeCompare","handleRemoveFromCart","handleAddToCart","item","handleSortByID","margin","map","name","quantity"],"sources":["/home/brizy/Documents/MyApp/test/ebs-fe-test/src/components/Products.tsx"],"sourcesContent":["import { ProductContext } from 'context';\nimport { CartItem, Product } from 'interfaces';\nimport React, { FC, useCallback, useContext, useEffect } from 'react';\nimport { useState } from 'react';\nimport { useMemo } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nexport const Products: FC = () => {\n  const navigate = useNavigate();\n\n  const handleGoToCart = useCallback(() => {\n    navigate('/cart');\n  }, [navigate]);\n\n  const { products, addToCart, removeFromCart, cartItems, fetchProducts } = useContext(ProductContext);\n  const [sortState, setSortState] = useState({ key: '', direction: '' });\n  const [sortFlag, setSortFlag] = useState<boolean>(false);\n  const [idFlag, setIdFlag] = useState<boolean>(false);\n\n  useEffect(() => {\n    fetchProducts();\n  }, [fetchProducts]);\n\n  const sortedItems = useMemo(() => {\n    let sortableProducts = [...products];\n    if (sortState !== null) {\n      sortableProducts.sort((a, b) => {\n        if (a.price < b.price) {\n          return sortState.direction === 'lowest' ? -1 : 1;\n        }\n        if (a.price > b.price) {\n          return sortState.direction === 'lowest' ? 1 : -1;\n        }\n        return 0;\n      });\n    }\n    return sortableProducts;\n  }, [sortState, products]);\n\n  const [_, setResortedArray] = useState<Product[]>(sortedItems);\n\n  const handleSortByPrice = useCallback(\n    (key: string) => {\n      let direction = 'lowest';\n      if (sortState && sortState.key === key && sortState.direction === 'lowest') {\n        direction = 'highest';\n      }\n      setSortState({ key, direction });\n    },\n    [sortState, setSortState],\n  );\n\n  const handleSortByCategory = useCallback(() => {\n    setSortFlag(!sortFlag);\n    const newArr = sortedItems.sort((a, b): number => {\n      return sortFlag ? a.category.id.localeCompare(b.category.id) : b.category.id.localeCompare(a.category.id);\n    });\n    setResortedArray(newArr);\n  }, [sortedItems, sortFlag]);\n\n  const handleRemoveFromCart = useCallback(\n    (id: number) => {\n      removeFromCart(id);\n    },\n    [removeFromCart],\n  );\n\n  const handleAddToCart = useCallback(\n    (item: CartItem) => {\n      addToCart(item);\n    },\n    [addToCart],\n  );\n\n  const handleSortByID = useCallback(() => {\n   setIdFlag(!idFlag)\n    setResortedArray(sortedItems.sort((a, b) => a.id - b.id));\n  }, [sortedItems]);\n\n  return (\n    <div style={{ margin: '50px' }}>\n      <button onClick={handleGoToCart} className=\"goto\">\n        Go To Cart\n      </button>\n\n      <table>\n        <tbody>\n          <tr>\n            <th onClick={handleSortByID}>ID</th>\n            <th>NAME</th>\n            <th>\n              <button onClick={handleSortByCategory}>CATEGORY</button>\n            </th>\n            <th>\n              <button\n                onClick={() => {\n                  handleSortByPrice('highest');\n                }}\n              >\n                PRICE\n              </button>\n            </th>\n            <th>ACTIONS</th>\n          </tr>\n          {sortedItems.map((cartItems) => {\n            return (\n              <tr key={cartItems.id}>\n                <td>{cartItems.id}</td>\n                <td> {cartItems.name}</td>\n                <td> {cartItems.category.name}</td>\n                <td>${cartItems.price}</td>\n                <td>\n                  <button onClick={() => handleRemoveFromCart(cartItems.id)}>REMOVE</button> Select{' '}\n                  <button onClick={() => handleAddToCart({ ...cartItems, quantity: 1 })}>ADD</button>\n                </td>\n              </tr>\n            );\n          })}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}